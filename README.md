# Web Proxy API - å¤šé¡¹ç›® AI ä»£ç†æœåŠ¡

è¿™æ˜¯ä¸€ä¸ªåŸºäº Nuxt 3 çš„å¤šé¡¹ç›® AI ä»£ç†æœåŠ¡ï¼Œæ”¯æŒé›†æˆå¤šä¸ª AI æœåŠ¡æä¾›å•†ã€‚ä½¿ç”¨ Bun ä½œä¸ºè¿è¡Œæ—¶ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚

## ä¸»è¦ç‰¹æ€§

- âœ… **å¤šé¡¹ç›®æ¶æ„**: æ”¯æŒé›†æˆå¤šä¸ª AI æœåŠ¡æä¾›å•†ï¼ˆDeepSeekã€OpenAIã€Anthropic ç­‰ï¼‰
- âœ… **Web ç®¡ç†é¢æ¿**: åŸºäº NuxtUI çš„ç°ä»£åŒ–ç®¡ç†ç•Œé¢
- âœ… **ä»¤ç‰Œç®¡ç†**: æ”¯æŒ Session ä»¤ç‰Œå’Œè´¦å·å¯†ç ä¸¤ç§æ–¹å¼
- âœ… **æ¨¡å‹è·¯ç”±**: æ ¹æ®æ¨¡å‹åç§°è‡ªåŠ¨è·¯ç”±åˆ°å¯¹åº”çš„æœåŠ¡æä¾›å•†
- âœ… **é¡¹ç›®éš”ç¦»**: æ¯ä¸ªé¡¹ç›®æœ‰ç‹¬ç«‹çš„ utils å’Œ pluginsï¼Œäº’ä¸å¹²æ‰°
- âœ… **æ–‡ä»¶åŒ–è´¦å·ç®¡ç†**: æ¯ä¸ªé¡¹ç›®çš„è´¦å·å­˜å‚¨ä¸ºç‹¬ç«‹çš„ JSON æ–‡ä»¶
- âœ… **è‡ªåŠ¨ç™»å½•**: è‡ªåŠ¨å¤„ç†è´¦å·ç™»å½•å’Œ token åˆ·æ–°
- âœ… **è´¦å·è½®æ¢**: æ™ºèƒ½çš„è´¦å·è½®æ¢æœºåˆ¶ï¼Œé¿å…å•ä¸ªè´¦å·è¿‡è½½
- âœ… **æµå¼å“åº”**: æ”¯æŒ SSE æµå¼è¾“å‡º
- âœ… **Bun ä¼˜åŒ–**: ä½¿ç”¨ Bun è¿è¡Œæ—¶è·å¾—æ›´å¿«çš„å¯åŠ¨å’Œæ‰§è¡Œé€Ÿåº¦

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨ Bun (æ¨è)
bun install

# æˆ–ä½¿ç”¨ npm
npm install
```

### 2. é…ç½®ç®¡ç†å‘˜è´¦å·

ç¼–è¾‘ `config.yaml`:

```yaml
app:
  name: web-proxy-api
  port: 3000

# ç®¡ç†å‘˜è´¦å·é…ç½®
admin:
  username: admin
  password: admin123  # è¯·ä¿®æ”¹ä¸ºå¼ºå¯†ç 

# API Keys
keys:
  - your-api-key-here

# é¡¹ç›®é…ç½®
projects:
  deepseek:
    enabled: true
```

### 3. å¯åŠ¨æœåŠ¡

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# æˆ–ä½¿ç”¨ Bun
bun run dev
```

### 4. è®¿é—®ç®¡ç†é¢æ¿

æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:3000/admin

ä½¿ç”¨é…ç½®çš„ç®¡ç†å‘˜è´¦å·ç™»å½•ï¼Œå³å¯ç®¡ç†ä»¤ç‰Œã€‚

ğŸ“– **è¯¦ç»†ä½¿ç”¨æŒ‡å—**: [ç®¡ç†é¢æ¿å¿«é€Ÿå¼€å§‹](docs/ADMIN_QUICKSTART.md)

## ç®¡ç†é¢æ¿åŠŸèƒ½

### ğŸ¯ ä¸»è¦åŠŸèƒ½

- **é¡¹ç›®ç®¡ç†**: æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰å¯ç”¨çš„é¡¹ç›®
- **ä»¤ç‰Œç®¡ç†**: 
  - æ·»åŠ  Session ä»¤ç‰Œï¼ˆç›´æ¥ä½¿ç”¨å·²è·å–çš„ tokenï¼‰
  - æ·»åŠ è´¦å·å¯†ç ï¼ˆé‚®ç®±/æ‰‹æœºå· + å¯†ç ï¼‰
  - æŸ¥çœ‹ä»¤ç‰Œè¯¦æƒ…
  - åˆ é™¤ä»¤ç‰Œ
- **å®‰å…¨è®¤è¯**: åŸºäº Session çš„ç™»å½•ç³»ç»Ÿ
- **å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡

### ğŸ“¸ ç•Œé¢é¢„è§ˆ

- **é¦–é¡µ**: é¡¹ç›®æ¦‚è§ˆå’Œå¿«é€Ÿå¯¼èˆª
- **ç™»å½•é¡µ**: ç®€æ´çš„ç™»å½•è¡¨å•
- **ç®¡ç†é¢æ¿**: 
  - é¡¹ç›®åˆ—è¡¨æ ‡ç­¾é¡µ
  - ä»¤ç‰Œç®¡ç†æ ‡ç­¾é¡µ
  - æ·»åŠ /æŸ¥çœ‹/åˆ é™¤ä»¤ç‰ŒåŠŸèƒ½

## é¡¹ç›®ç»“æ„

```
web-proxy-api/
â”œâ”€â”€ accounts/                    # è´¦å·æ–‡ä»¶ç›®å½•ï¼ˆæŒ‰é¡¹ç›®åˆ†ç±»ï¼‰
â”‚   â”œâ”€â”€ deepseek/               # DeepSeek è´¦å·
â”‚   â”‚   â””â”€â”€ example-account.json
â”‚   â””â”€â”€ [other-projects]/       # å…¶ä»–é¡¹ç›®è´¦å·
â”œâ”€â”€ docs/                        # æ–‡æ¡£
â”‚   â””â”€â”€ ADD_NEW_PROJECT.md      # æ·»åŠ æ–°é¡¹ç›®æŒ‡å—
â”œâ”€â”€ public/
â”‚   â””â”€â”€ deepseek_wasm/          # DeepSeek WASM æ–‡ä»¶
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ v0/                 # ç®¡ç† API
â”‚   â”‚   â””â”€â”€ v1/                 # é€šç”¨ OpenAI å…¼å®¹ API
â”‚   â”‚       â”œâ”€â”€ models.get.ts   # è·å–æ‰€æœ‰å¯ç”¨æ¨¡å‹
â”‚   â”‚       â””â”€â”€ chat/
â”‚   â”‚           â””â”€â”€ completions.post.ts  # èŠå¤©å®Œæˆï¼ˆè‡ªåŠ¨è·¯ç”±ï¼‰
â”‚   â”œâ”€â”€ projects/               # é¡¹ç›®ç›®å½•ï¼ˆæ¯ä¸ª AI æœåŠ¡ä¸€ä¸ªï¼‰
â”‚   â”‚   â””â”€â”€ deepseek/           # DeepSeek é¡¹ç›®
â”‚   â”‚       â”œâ”€â”€ handler.ts      # ä¸»å¤„ç†å™¨
â”‚   â”‚       â””â”€â”€ utils/          # é¡¹ç›®ä¸“ç”¨å·¥å…·
â”‚   â”‚           â”œâ”€â”€ accounts.ts
â”‚   â”‚           â”œâ”€â”€ api.ts
â”‚   â”‚           â””â”€â”€ wasm.ts
â”‚   â”œâ”€â”€ plugins/                # å…¨å±€æ’ä»¶
â”‚   â”‚   â”œâ”€â”€ config.ts           # é…ç½®åŠ è½½
â”‚   â”‚   â””â”€â”€ register-deepseek.ts # DeepSeek é¡¹ç›®æ³¨å†Œ
â”‚   â””â”€â”€ utils/                  # é€šç”¨å·¥å…·ï¼ˆä¸å«é¡¹ç›®ç‰¹å®šé€»è¾‘ï¼‰
â”‚       â”œâ”€â”€ config.ts           # é…ç½®ç®¡ç†
â”‚       â””â”€â”€ project-registry.ts # é¡¹ç›®æ³¨å†Œç³»ç»Ÿ
â”œâ”€â”€ config.yaml                 # ä¸»é…ç½®æ–‡ä»¶
â””â”€â”€ package.json
```

## å®‰è£…

### 1. å®‰è£… Bun (æ¨è)

```bash
# Windows (PowerShell)
powershell -c "irm bun.sh/install.ps1|iex"

# macOS/Linux
curl -fsSL https://bun.sh/install | bash
```

### 2. å®‰è£…ä¾èµ–

```bash
bun install
```

## é…ç½®

### 1. é…ç½® API Keys

ç¼–è¾‘ `config.yaml`:

```yaml
app:
  name: web-proxy-api
  port: 3000

# é…ç½®å¯ä»¥ä½¿ç”¨æ‰˜ç®¡è´¦å·çš„ API Keys
keys:
  - your-api-key-here
  - another-key-here

# é¡¹ç›®é…ç½®
projects:
  deepseek:
    enabled: true
  # æ·»åŠ æ›´å¤šé¡¹ç›®...

logging:
  level: info
  format: json
```

### 2. æ·»åŠ è´¦å·

åœ¨ `accounts/[project-name]/` ç›®å½•ä¸‹åˆ›å»º JSON æ–‡ä»¶ï¼š

**DeepSeek è´¦å·** (`accounts/deepseek/account1.json`):
```json
{
  "email": "your-email@example.com",
  "password": "your-password",
  "token": ""
}
```

## è¿è¡Œ

### å¼€å‘æ¨¡å¼

```bash
bun run dev
```

### ç”Ÿäº§æ¨¡å¼

```bash
# æ„å»º
bun run build

# é¢„è§ˆ
bun run preview
```

## API ä½¿ç”¨

### 1. è·å–å¯ç”¨æ¨¡å‹

```bash
curl http://localhost:3000/v1/models \
  -H "Authorization: Bearer your-api-key-here"
```

### 2. èŠå¤©å®Œæˆï¼ˆè‡ªåŠ¨è·¯ç”±ï¼‰

ç³»ç»Ÿä¼šæ ¹æ®æ¨¡å‹åç§°è‡ªåŠ¨è·¯ç”±åˆ°å¯¹åº”çš„é¡¹ç›®ï¼š

```bash
curl http://localhost:3000/v1/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer your-api-key-here" \
  -d '{
    "model": "deepseek-chat",
    "messages": [
      {"role": "user", "content": "Hello!"}
    ],
    "stream": true
  }'
```

### 3. ä½¿ç”¨è‡ªå·±çš„ Token

```bash
curl http://localhost:3000/v1/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer your-own-token" \
  -d '{
    "model": "deepseek-chat",
    "messages": [
      {"role": "user", "content": "Hello!"}
    ],
    "stream": true
  }'
```

## å½“å‰æ”¯æŒçš„é¡¹ç›®

### DeepSeek

**æ”¯æŒçš„æ¨¡å‹:**
- `deepseek-chat`: æ ‡å‡†å¯¹è¯æ¨¡å‹
- `deepseek-reasoner`: å¸¦æ¨ç†è¿‡ç¨‹çš„æ¨¡å‹
- `deepseek-chat-search`: å¸¦æœç´¢åŠŸèƒ½çš„å¯¹è¯æ¨¡å‹
- `deepseek-reasoner-search`: å¸¦æ¨ç†å’Œæœç´¢åŠŸèƒ½çš„æ¨¡å‹

**ç‰¹æ€§:**
- è‡ªåŠ¨è´¦å·ç®¡ç†å’Œè½®æ¢
- PoW (Proof of Work) è®¡ç®—
- æ”¯æŒæ¨ç†è¿‡ç¨‹è¾“å‡º
- æ”¯æŒæœç´¢åŠŸèƒ½

## æ·»åŠ æ–°é¡¹ç›®

æŸ¥çœ‹ [æ·»åŠ æ–°é¡¹ç›®æŒ‡å—](docs/ADD_NEW_PROJECT.md) äº†è§£å¦‚ä½•é›†æˆæ–°çš„ AI æœåŠ¡æä¾›å•†ã€‚

### å¿«é€Ÿå¼€å§‹

1. åˆ›å»ºé¡¹ç›®ç›®å½•: `server/projects/your-project/`
2. å®ç°å¤„ç†å™¨: `handler.ts`
3. åˆ›å»ºæ³¨å†Œæ’ä»¶: `server/plugins/register-your-project.ts`
4. æ›´æ–°é…ç½®: `config.yaml`
5. æµ‹è¯•ä½ çš„é¡¹ç›®

## æ¶æ„è®¾è®¡

### é¡¹ç›®éš”ç¦»åŸåˆ™

- âœ… **æ¯ä¸ªé¡¹ç›®ç‹¬ç«‹**: æ‰€æœ‰é¡¹ç›®ç‰¹å®šä»£ç åœ¨ `server/projects/[project-name]/` ä¸‹
- âœ… **é€šç”¨ç¯å¢ƒçº¯å‡€**: `server/utils/` å’Œ `server/api/` åªåŒ…å«é€šç”¨é€»è¾‘
- âœ… **æ¨¡å‹è·¯ç”±**: é€šè¿‡ `project-registry` æ ¹æ®æ¨¡å‹åç§°è‡ªåŠ¨åˆ†å‘è¯·æ±‚
- âœ… **æ’ä»¶æ³¨å†Œ**: æ¯ä¸ªé¡¹ç›®é€šè¿‡æ’ä»¶ç³»ç»Ÿæ³¨å†Œè‡ªå·±çš„å¤„ç†å™¨

### è¯·æ±‚æµç¨‹

```
å®¢æˆ·ç«¯è¯·æ±‚
    â†“
API ç«¯ç‚¹ (completions.post.ts)
    â†“
é¡¹ç›®æ³¨å†Œè¡¨ (project-registry.ts)
    â†“ (æ ¹æ®æ¨¡å‹åç§°è·¯ç”±)
é¡¹ç›®å¤„ç†å™¨ (projects/[name]/handler.ts)
    â†“
é¡¹ç›®å·¥å…·å‡½æ•° (projects/[name]/utils/)
    â†“
ä¸Šæ¸¸ API
```

## æ€§èƒ½ä¼˜åŒ–

### Bun è¿è¡Œæ—¶ä¼˜åŠ¿

- **å¿«é€Ÿå¯åŠ¨**: Bun çš„å¯åŠ¨é€Ÿåº¦æ¯” Node.js å¿« 4 å€
- **ä½å†…å­˜å ç”¨**: æ›´é«˜æ•ˆçš„å†…å­˜ç®¡ç†
- **åŸç”Ÿ TypeScript**: æ— éœ€ç¼–è¯‘ç›´æ¥è¿è¡Œ TypeScript
- **å†…ç½® fetch**: ä½¿ç”¨åŸç”Ÿ fetch APIï¼Œæ€§èƒ½æ›´å¥½

### è´¦å·ç®¡ç†ä¼˜åŒ–

- **æ–‡ä»¶åŒ–å­˜å‚¨**: æ¯ä¸ªè´¦å·ç‹¬ç«‹æ–‡ä»¶ï¼Œä¾¿äºç®¡ç†å’Œå¤‡ä»½
- **æ™ºèƒ½è½®æ¢**: é¿å…å•ä¸ªè´¦å·é¢‘ç¹è°ƒç”¨
- **è‡ªåŠ¨é‡è¯•**: å¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢è´¦å·é‡è¯•
- **Token ç¼“å­˜**: è‡ªåŠ¨ä¿å­˜å’Œå¤ç”¨ token

## æ•…éšœæ’é™¤

### 1. æ¨¡å‹ä¸å¯ç”¨

æ£€æŸ¥é¡¹ç›®æ˜¯å¦å·²æ³¨å†Œï¼š
```bash
curl http://localhost:3000/v1/models
```

### 2. è´¦å·ç™»å½•å¤±è´¥

- æ£€æŸ¥è´¦å·æ–‡ä»¶è·¯å¾„: `accounts/[project-name]/`
- ç¡®è®¤è´¦å·ä¿¡æ¯æ­£ç¡®
- æŸ¥çœ‹æ—¥å¿—è¾“å‡ºçš„è¯¦ç»†é”™è¯¯ä¿¡æ¯

### 3. é¡¹ç›®æœªåŠ è½½

- ç¡®è®¤æ’ä»¶æ–‡ä»¶å­˜åœ¨: `server/plugins/register-[project-name].ts`
- æ£€æŸ¥é…ç½®æ–‡ä»¶: `config.yaml` ä¸­é¡¹ç›®æ˜¯å¦å¯ç”¨
- æŸ¥çœ‹å¯åŠ¨æ—¥å¿—ç¡®è®¤é¡¹ç›®æ³¨å†ŒæˆåŠŸ

## å¼€å‘

### æ·»åŠ æ–°åŠŸèƒ½

1. **é€šç”¨åŠŸèƒ½**: åœ¨ `server/utils/` ä¸‹æ·»åŠ 
2. **é¡¹ç›®ç‰¹å®šåŠŸèƒ½**: åœ¨ `server/projects/[project-name]/utils/` ä¸‹æ·»åŠ 
3. **API è·¯ç”±**: åœ¨ `server/api/` ä¸‹æ·»åŠ æ–°çš„è·¯ç”±æ–‡ä»¶

### è°ƒè¯•

```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
DEBUG=* bun run dev
```

## ä¸ Python ç‰ˆæœ¬çš„ä¸»è¦åŒºåˆ«

1. **å¤šé¡¹ç›®æ¶æ„**: æ”¯æŒå¤šä¸ª AI æœåŠ¡æä¾›å•†çš„é›†æˆ
2. **é¡¹ç›®éš”ç¦»**: æ¯ä¸ªé¡¹ç›®æœ‰ç‹¬ç«‹çš„ä»£ç ç©ºé—´
3. **è¿è¡Œæ—¶**: ä» Python/FastAPI è¿ç§»åˆ° Nuxt 3 + Bun
4. **è´¦å·ç®¡ç†**: æŒ‰é¡¹ç›®åˆ†ç±»çš„ç‹¬ç«‹ JSON æ–‡ä»¶
5. **æ€§èƒ½**: ä½¿ç”¨ Bun è·å¾—æ›´å¿«çš„æ‰§è¡Œé€Ÿåº¦

## License

MIT

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ç›¸å…³é“¾æ¥

- [ç®¡ç†é¢æ¿å¿«é€Ÿå¼€å§‹](docs/ADMIN_QUICKSTART.md)
- [ç®¡ç†é¢æ¿å®Œæ•´æ–‡æ¡£](docs/MANAGEMENT_PANEL.md)
- [æ·»åŠ æ–°é¡¹ç›®æŒ‡å—](docs/ADD_NEW_PROJECT.md)
- [æ¶æ„è¯´æ˜](docs/ARCHITECTURE.md)
- [Nuxt 3 æ–‡æ¡£](https://nuxt.com/)
- [Bun æ–‡æ¡£](https://bun.sh/)
